LLM 医用画像処理システム
このアプリケーションは，Streamlit と Llama-3-ELYZA-JP モデルを使用して，対話的な医用画像処理を可能にする Web システムです．
ユーザーは自然言語で指示を与えることで，DICOM 画像のノイズ除去，エッジ強調，回転，拡大などの画像処理を簡単に適用できます．

主な機能
DICOM ファイルのアップロード: 16-bit の DICOM ファイル (.dcm) をアップロードし，その内容を表示します．
WW/WL (ウィンドウ幅/レベル) 調整: 医用画像の表示を調整するためのウィンドウ幅 (Window Width) とウィンドウレベル (Window Level) をスライダーまたは数値入力で変更できます．
自然言語による画像処理: 「ノイズを消して」や「輪郭をはっきりさせてから，エッジを検出して」といった自然な日本語の指示をテキスト入力欄に入力することで，LLM が最適な画像処理パイプラインを自動で生成・実行します．
パラメータの調整: LLM が生成した各処理ステップのパラメータ (例: ノイズ除去の強度，エッジ強調の度合い) をサイドバーで調整できます．
処理結果のリアルタイム表示: 処理前と処理後の画像を並べて表示し，パラメータ調整の結果をリアルタイムに確認できます．

使用方法
ファイルのアップロード: 画面上部のファイルアップローダーから，処理したい DICOM ファイルを選択します．
表示の調整: サイドバーにある「表示調整 (WW/WL)」セクションで，スライダーを動かしたり，プリセットを選択して，画像の表示を見やすいように調整します．
指示の入力: 中央のテキスト入力欄に，実行したい画像処理の指示を日本語で入力します．
例: ノイズを消して
例: エッジを強調してから、エッジを検出して
例: 画像を白黒に二値化して
パラメータの調整: 指示を入力すると，サイドバーに処理のステップとパラメータ調整用の UI が表示されます．必要に応じて，スライダーなどを動かして調整します．
結果の確認: 指示やパラメータ調整の結果が，画面中央の「処理前」と「処理後」のセクションにリアルタイムで反映されます．

動作環境
このアプリケーションは Python で記述されており，以下のライブラリに依存しています．

streamlit: ウェブアプリケーションフレームワーク
pydicom: DICOM ファイルの読み込み
numpy: 数値計算
opencv-python (cv2): 画像処理
llama-cpp-python: LLM モデルの実行

アプリケーションの実行には，Streamlit と必要なライブラリがインストールされている環境が必要です．また，Llama-3-ELYZA-JP-8B-Q4_K_M.gguf というモデルファイルが実行ディレクトリに配置されている必要があります．

# 必要なライブラリのインストール
pip install streamlit pydicom numpy opencv-python llama-cpp-python
